name: Acquire Unity License

on:
  workflow_dispatch:

jobs:
  activate:
    name: Get Unity License via Login
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: game-ci/unity-activate@v1
        with:
          unityVersion: 2022.3.54f1
        env:
          UNITY_EMAIL: ${{ secrets.UNITY_EMAIL }}
          UNITY_PASSWORD: ${{ secrets.UNITY_PASSWORD }}

      - name: Export license
        run: |
          cat /home/runner/.local/share/unity3d/Unity/Unity_lic.ulf || \
          cat /root/.local/share/unity3d/Unity/Unity_lic.ulf || \
          echo "License file not found in expected locations"
          find / -name "Unity_lic.ulf" 2>/dev/null || true
